{"version":3,"sources":["../scripts.babel/fetchival.js"],"names":[],"mappings":"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","file":"fetchival.js","sourcesContent":[";(function (window) {\n\n  function defaults (target, obj) {\n    for (var prop in obj) target[prop] = target[prop] || obj[prop]\n  }\n\n  function getQuery (queryParams) {\n    var arr = Object.keys(queryParams).map(function (k) {\n      return [k, encodeURIComponent(queryParams[k])].join('=')\n    })\n    return '?' + arr.join('&')\n  }\n\n  function _fetch (method, url, opts, data, queryParams) {\n    opts.method = method\n    opts.headers = opts.headers || {}\n    opts.responseAs = (opts.responseAs && ['json', 'text'].indexOf(opts.responseAs) >= 0) ? opts.responseAs : 'json'\n\n    defaults(opts.headers, {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    })\n\n    if (queryParams) {\n      url += getQuery(queryParams)\n    }\n\n    if (data) {\n      opts.body = JSON.stringify(data)\n    }\n\n    return fetchival.fetch(url, opts)\n      .then(function (response) {\n        if (response.status >= 200 && response.status < 300) {\n          return response[opts.responseAs]()\n        }\n        var err = new Error(response.statusText)\n        err.response = response\n        throw err\n      })\n  }\n\n  function fetchival (url, opts) {\n    opts = opts || {}\n\n    var _ = function (u, o) {\n      // Extend parameters with previous ones\n      u = url + '/' + u\n      o = o || {}\n      defaults(o, opts)\n      return fetchival(u, o)\n    }\n\n    _.get = function (queryParams) {\n      return _fetch('GET', url, opts, null, queryParams)\n    }\n\n    _.post = function (data) {\n      return _fetch('POST', url, opts, data)\n    }\n\n    _.put = function (data) {\n      return _fetch('PUT', url, opts, data)\n    }\n\n    _.patch = function (data) {\n      return _fetch('PATCH', url, opts, data)\n    }\n\n    _.delete = function () {\n      return _fetch('DELETE', url, opts)\n    }\n\n    return _\n  }\n\n  // Expose fetch so that other polyfills can be used\n  // Bind fetch to window to avoid TypeError: Illegal invocation\n  fetchival.fetch = typeof fetch !== 'undefined' ? fetch.bind(window) : null\n\n  // Support CommonJS, AMD & browser\n  if (typeof exports === 'object')\n    module.exports = fetchival\n  else if (typeof define === 'function' && define.amd)\n    define(function() { return fetchival })\n  else\n    window.fetchival = fetchival\n\n})(typeof window != 'undefined' ? window : undefined);"]}